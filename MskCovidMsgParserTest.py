import unittest
from MskCovidMsgParser import MskCovidMsgParser

class MskCovidMsgParserTest(unittest.TestCase):

    def setUp(self):
        self.msg_oct21 = """‚ùóÔ∏è–ù–∞ –ò–í–õ –≤ –ú–æ—Å–∫–≤–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è 383 –ø–∞—Ü–∏–µ–Ω—Ç–∞ —Å COVID-19

–í —Å—Ç–æ–ª–∏—Ü–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ 4389 –Ω–æ–≤—ã—Ö —Å–ª—É—á–∞–µ–≤ –∫–æ—Ä–æ–Ω–∞–≤–∏—Ä—É—Å–∞. –ó–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å—É—Ç–∫–∏ –≥–æ—Å–ø–∏—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 1215 –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤ —Å COVID-19. –ù–∞ –ò–í–õ –≤ –±–æ–ª—å–Ω–∏—Ü–∞—Ö –ú–æ—Å–∫–≤—ã –Ω–∞—Ö–æ–¥–∏—Ç—Å—è 383 —á–µ–ª–æ–≤–µ–∫–∞.

–°—Ä–µ–¥–∏ –Ω–æ–≤—ã—Ö –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:

üîπ44,1%‚Äî –æ—Ç 18 –¥–æ 45 –ª–µ—Ç
üîπ31,6%‚Äî –æ—Ç 46 –¥–æ 65 –ª–µ—Ç
üîπ11,0%‚Äî –æ—Ç 66 –¥–æ 79 –ª–µ—Ç
nüîπ4,5% ‚Äî —Å—Ç–∞—Ä—à–µ 80 –ª–µ—Ç
üîπ8,8% ‚Äî –¥–µ—Ç–∏

–û–ø–µ—Ä—à—Ç–∞–± –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è –¥–æ–º–∞—à–Ω–µ–≥–æ —Ä–µ–∂–∏–º–∞ –≥–æ—Ä–æ–∂–∞–Ω–∞–º —Å—Ç–∞—Ä—à–µ 65 –ª–µ—Ç –∏ –º–æ—Å–∫–≤–∏—á–∞–º —Å —Ö—Ä–æ–Ω–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–±–æ–ª–µ–≤–∞–Ω–∏—è–º–∏."""


    def test_oct21_cases(self):
        p = MskCovidMsgParser()
        result = p.parse_cases(self.msg_oct21)

        self.assertEqual("4389", result["new_cases"])
        self.assertEqual("383", result["lv_cases"])
        self.assertEqual("1215", result["hospital_cases"])